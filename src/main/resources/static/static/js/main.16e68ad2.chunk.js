(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n(8),c=n.n(s),o=(n(130),n(131),n(132),n(10)),i=n(17),l=n(11),d=n(32),u=n.n(d),b=n(26),m=n(21),j=n.n(m),h=n(41),f=n.n(h),p=n(23),O=n(69);function x(){var e=JSON.parse(localStorage.getItem("user")||"{}");return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var v=Object(b.b)({name:"counter",initialState:{taskMap:{}},reducers:{setTaskMap:function(e,t){e.taskMap=t.payload}}}),g=v.actions.setTaskMap,k=function(e){return e.todo.taskMap},C=(v.reducer,Object(b.b)({name:"counter",initialState:{user:{},serverSideErrorMessage:""},reducers:{setUser:function(e,t){e.user=t.payload},setServerSideErrorMessage:function(e,t){e.serverSideErrorMessage=t.payload}}})),N=C.actions,_=N.setUser,w=N.setServerSideErrorMessage,y=function(e){return function(t){var n=ee+"/signin";j.a.post(n,e).then((function(e){t(S(e))})).catch((function(e){t(w(e.response.data.message))}))}},S=function(e){return function(t){var n=e.data;localStorage.setItem("user",JSON.stringify(n)),t(_(n)),t(w(""))}},T=function(e){return e.login.user},E=function(e){return e.login.serverSideErrorMessage},M=(C.reducer,n(13)),I=n(2),D=n.n(I),B=function(){var e=Object(l.c)(E),t=Object(l.b)(),n=Object(r.useState)({username:"",password:""}),s=Object(i.a)(n,2),c=s[0],d=s[1],b=Object(r.useState)({username:[],password:[]}),m=Object(i.a)(b,2),h=m[0],f=m[1],p=function(){(function(){var e=function(e){var t=[];return e.length<4&&t.push("Your password must be at least 6 characters"),e.search(/[a-z]/i)<0&&t.push("Your password must contain at least one letter."),e.search(/[0-9]/)<0&&t.push("Your password must contain at least one digit."),t}(c.password),t=function(e){var t=[];return(e.length<4||e.length>13)&&t.push("Username must be at between 4 and 12 characters"),e.search(/^[a-zA-Z0-9]*$/)<0&&t.push("Username must start with english latter and can only contain numbers and letters"),t}(c.username);return f({password:e,username:t}),M.isEmpty(e)&&M.isEmpty(t)})()&&t(function(e){return function(t){var n=ee+"/signup";j.a.post(n,e).then((function(){t(y(e)),t(C.actions.setServerSideErrorMessage(""))})).catch((function(){t(w("failed to signUp"))}))}}(c))},O=function(e,t){if(!t.includes(" ")){var n=Object(o.a)({},c);n[e]=t,d(n)}},x=function(e){return M.map(h[e],(function(t,n){return v(t,"error_element_"+e+"_"+n)}))},v=function(e,t){return Object(a.jsx)("div",{id:t,className:u.a.errorMessage,children:e},t)};return Object(a.jsxs)("div",{className:D()("container-fluid card p-3",u.a.loginContainer),children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Username"}),Object(a.jsx)("input",{value:c.username,onChange:function(e){return O("username",e.target.value)},type:"text",className:"form-control",id:"userNameField"}),!M.isEmpty(h.username)&&x("username")]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(a.jsx)("input",{value:c.password,onChange:function(e){return O("password",e.target.value)},type:"password",className:"form-control",id:"exampleInputPassword1"}),!M.isEmpty(h.password)&&x("password")]}),v(e,"serverSideError")]}),Object(a.jsxs)("div",{className:u.a.signInUpContainer,children:[Object(a.jsx)("button",{onClick:function(){t(y(c))},className:"btn-sm btn-primary m-3",children:"Sign In"}),Object(a.jsx)("button",{onClick:function(){return p()},className:"btn-sm btn-primary m-3",children:"Sign Up"})]})]})},F=n(191),A=n(20),U=Object(A.a)(),J=n(33),R=n.n(J),z=n(27),L=n.n(z),P=function(e){var t=Object(l.b)(),n=Object(r.useState)({title:"",done:!1}),s=Object(i.a)(n,2),c=s[0],d=s[1],u=function(e,t){var n=Object(o.a)({},c);n[e]=t,d(n)},b=function(){var e,n=L()().utcOffset(0).format(),a={title:c.title,done:c.done,date:n,modified:n};t((e=a,function(){var t=Object(O.a)(f.a.mark((function t(n,a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=te+"/createTask",j.a.post(r,e,{headers:x()}).then((function(e){var t=e.data,r=Object(o.a)(Object(p.a)({},t.id,t),a().todo.taskMap);n(g(r))})).catch((function(e){console.error("Error: "+e),alert("Failed to create task")}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()))};return e.isOpen?Object(a.jsxs)("div",{className:D()("container-fluid card mb-3 mt-3",R.a.container),children:[Object(a.jsxs)("div",{className:R.a.textAreaContainer,children:[Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("h4",{className:"form-label",children:"Create Task"}),Object(a.jsx)("textarea",{value:c.title,placeholder:"Write your task here",onChange:function(e){return u("title",e.target.value)},className:"form-control",id:"title"})]}),Object(a.jsxs)("div",{className:R.a.doneCheckBox,children:[Object(a.jsx)("input",{checked:c.done,onChange:function(){return u("done",!c.done)},type:"checkbox",className:"m-1",id:"exampleCheck1"}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"exampleCheck1",children:"Done"})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){return b()},className:"btn-sm btn-primary m-3",children:"Submit"})})]}):Object(a.jsx)("div",{})},W=n(34),H=n.n(W),Y=function(e){var t=e.taskItem,n=Object(l.b)(),s=Object(r.useState)(t),c=Object(i.a)(s,2),d=c[0],u=c[1],b=function(e,a){var r,s=Object(o.a)({},t);s[e]=a,s.modified=L()().utcOffset(0).format(),n((r=s,function(e,t){var n=te+"/updateTask";j.a.post(n,r,{headers:x()}).then((function(n){var a=n.data,r=Object(o.a)(Object(o.a)({},t().todo.taskMap),{},Object(p.a)({},a.id,n.data));e(g(r))})).catch((function(e){console.error("Error: "+e),alert("Failed to update task")}))}))},m=function(e){return L()(e).tz(L.a.tz.guess()).format("HH:mm DD/MM/yyyy")},h=M.isEqual(d.title,t.title);return Object(a.jsxs)("div",{className:D()("card text-center ",e.classname,H.a.backgroundTaskItem),children:[Object(a.jsxs)("div",{className:"card-header text-muted",children:["Created : ",m(t.date)]}),Object(a.jsxs)("div",{className:"card-header text-muted",children:["Last Modified : ",m(t.modified)]}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("textarea",{value:d.title,onChange:function(e){return function(e){var t=Object(o.a)(Object(o.a)({},d),{},{title:e});u(t)}(e.target.value)},className:"form-control mb-2",id:"exampleFormControlTextarea1",rows:3}),Object(a.jsx)("button",{disabled:h,title:h?"There are no changes to submit":"Submit the edition of this task",onClick:function(){return b("title",d.title)},className:h?"m-2 disabled":"btn-sm btn-success m-2",children:"Edit Task"})]}),Object(a.jsxs)("div",{className:H.a.doneAndDeleteContainer,children:[Object(a.jsxs)("div",{className:H.a.doneCheckBox,children:[Object(a.jsx)("input",{checked:t.done,onChange:function(){return b("done",!t.done)},type:"checkbox",className:"m-1",id:"exampleCheck1"}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"exampleCheck1",children:"Done"})]}),Object(a.jsx)("button",{onClick:function(){return n((e=t.id||"",function(t,n){var a=te+"/deleteTask?taskId="+e;j.a.delete(a,{headers:x()}).then((function(){var a=Object(o.a)({},n().todo.taskMap);delete a[e],t(g(a))})).catch((function(e){console.error("Error: "+e),alert("Failed to delete task")}))}));var e},className:"btn-sm btn-danger m-2",children:"Delete"})]})]})},q=n(35),G=n.n(q),Z=n(192),$=n(7),Q={date:"Creation Date",modified:"Modification Date"},V=function(e){var t=Object(l.b)(),n=Object(l.c)(k),s=Object(l.c)(T),c=Object(r.useState)({field:"date",order:"desc"}),d=Object(i.a)(c,2),u=d[0],b=d[1],m=Object(r.useState)(!1),h=Object(i.a)(m,2),f=h[0],O=h[1];Object(r.useEffect)((function(){M.isEmpty(s)||t((function(e){var t=te+"/allTasks";j.a.get(t,{headers:x()}).then((function(t){var n=t.data;e(g(n))})).catch((function(e){console.error("Error: "+e),alert("Failed to fetch data")}))}))}),[s]),Object(r.useEffect)((function(){O(!1)}),[n]);var N,_,w=function(){t((function(e){localStorage.removeItem("user"),e(C.actions.setUser({})),e(v.actions.setTaskMap({}))}))},y=function(){t((function(e){var t=te+"/deleteAllTasks";j.a.delete(t,{headers:x()}).then((function(){e(g({}))})).catch((function(e){console.error("Error: "+e),alert("Failed to delete task")}))}))},S=function(){var e=function(e,t){var n=Object(o.a)(Object(o.a)({},u),{},Object(p.a)({},e,t));b(n)};return Object(a.jsxs)("div",{className:G.a.sortDropDownContainer,children:[Object(a.jsx)(Z.d,{content:Object(a.jsxs)(Z.b,{children:[Object(a.jsx)(Z.c,{onClick:function(){return e("field","modified")},text:Q.modified}),Object(a.jsx)(Z.c,{onClick:function(){return e("field","date")},text:Q.date})]}),position:$.a.RIGHT_TOP,children:Object(a.jsx)(Z.a,{className:G.a.sortByFieldButton,icon:"share",text:"Sorting by "+Q[u.field]})}),Object(a.jsxs)(Z.f,{className:"m-2 ml-3",inline:!0,onChange:function(t){return e("order",t.target.value)},selectedValue:u.order,children:[Object(a.jsx)(Z.e,{label:"Desc",value:"desc"}),Object(a.jsx)(Z.e,{className:G.a.marginRight7,label:"Asc",value:"asc"})]})]})};return Object(a.jsxs)("div",{className:"bg-light",children:[Object(a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsx)("button",{onClick:function(){return w()},className:"btn-sm btn-info m-3",children:"Sign Out"}),Object(a.jsx)("button",{onClick:function(){return O(!f)},className:"btn-sm btn-success m-3",children:"Create New Task"}),Object(a.jsx)("button",{onClick:function(){return y()},className:"btn-sm btn-danger m-3",children:"Delete All Tasks"}),S()]})}),Object(a.jsx)(P,{isOpen:f}),Object(a.jsx)("h1",{children:"Tasks"}),M.map((N=u.field,_=u.order,M.orderBy(n,[N],[_])),(function(e){return Object(a.jsx)(Y,{classname:"mt-4",taskItem:e},e.id)}))]})},K="http://"+window.location.host,X="http://localhost:8080",ee=X+"/api/v1/auth",te=X+"/api/v1/todoTasks",ne=function(e){var t=Object(l.c)(T);return Object(r.useEffect)((function(){if(t.accessToken){var e=new URL(K+"/todolist");U.push(e.pathname)}else{var n=new URL(K+"/login");U.push(n.pathname)}}),[t]),Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("div",{className:"container-fluid w-50",children:Object(a.jsxs)(F.c,{children:[Object(a.jsx)(F.a,{user:t,exact:!0,path:["/","/todolist"],component:V}),Object(a.jsx)(F.a,{exact:!0,path:"/login",component:B})]})})})},ae={login:C.reducer,todo:v.reducer},re={login:{serverSideErrorMessage:"",user:JSON.parse(localStorage.getItem("user")||"{}")}},se=Object(b.a)({reducer:ae,preloadedState:re});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(184),n(185),n(186);c.a.render(Object(a.jsx)(F.b,{history:U,children:Object(a.jsx)(l.a,{store:se,children:Object(a.jsx)(ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},32:function(e,t,n){e.exports={signInUpContainer:"login_signInUpContainer__36uJf",errorMessage:"login_errorMessage__1gjBG",loginContainer:"login_loginContainer__Rhahw"}},33:function(e,t,n){e.exports={container:"createNewTask_container__1slFb",textAreaContainer:"createNewTask_textAreaContainer__2g0JJ",doneCheckBox:"createNewTask_doneCheckBox__25o7q"}},34:function(e,t,n){e.exports={doneAndDeleteContainer:"todoItem_doneAndDeleteContainer__3x_WF",backgroundTaskItem:"todoItem_backgroundTaskItem__2vZ_S",doneCheckBox:"todoItem_doneCheckBox__2xzQ1"}},35:function(e,t,n){e.exports={sortDropDownContainer:"todoList_sortDropDownContainer__2ydh0",sortByFieldButton:"todoList_sortByFieldButton__137gC",marginRight7:"todoList_marginRight7__3m1TA"}}},[[187,1,2]]]);
//# sourceMappingURL=main.16e68ad2.chunk.js.map