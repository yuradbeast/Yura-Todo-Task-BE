(this.webpackJsonpTodo_Task_Yuri=this.webpackJsonpTodo_Task_Yuri||[]).push([[0],{129:function(e,t,n){},130:function(e,t,n){},186:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n(8),o=n.n(s),c=(n(129),n(130),n(131),n(10)),i=n(17),l=n(11),d=n(32),u=n.n(d),j=n(26),b=n(21),m=n.n(b),h=n(42),f=n.n(h),O=n(23),p=n(70);function x(){var e=JSON.parse(localStorage.getItem("user")||"{}");return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var v=Object(j.b)({name:"counter",initialState:{taskMap:{}},reducers:{setTaskMap:function(e,t){e.taskMap=t.payload}}}),g=v.actions.setTaskMap,k=function(e){return e.todo.taskMap},_=(v.reducer,Object(j.b)({name:"counter",initialState:{user:{},serverSideErrorMessage:""},reducers:{setUser:function(e,t){e.user=t.payload},setServerSideErrorMessage:function(e,t){e.serverSideErrorMessage=t.payload}}})),C=_.actions,w=C.setUser,N=C.setServerSideErrorMessage,T=function(e){return function(t){var n=ee+"/signin";m.a.post(n,e).then((function(e){t(S(e))})).catch((function(e){t(N(e.response.data.message))}))}},S=function(e){return function(t){var n=e.data;localStorage.setItem("user",JSON.stringify(n)),t(w(n)),t(N(""))}},y=function(e){return e.login.user},E=function(e){return e.login.serverSideErrorMessage},I=(_.reducer,n(13)),M=n(2),D=n.n(M),B=n(190),F=function(){var e=Object(l.c)(E),t=Object(l.b)(),n=Object(r.useState)({username:"",password:""}),s=Object(i.a)(n,2),o=s[0],d=s[1],j=Object(r.useState)({username:[],password:[]}),b=Object(i.a)(j,2),h=b[0],f=b[1],O=function(){(function(){var e=function(e){var t=[];return e.length<4&&t.push("Your password must be at least 6 characters"),e.search(/[a-z]/i)<0&&t.push("Your password must contain at least one letter."),e.search(/[0-9]/)<0&&t.push("Your password must contain at least one digit."),t}(o.password),t=function(e){var t=[];return(e.length<4||e.length>13)&&t.push("Username must be at between 4 and 12 characters"),e.search(/^[a-zA-Z0-9]*$/)<0&&t.push("Username must start with english latter and can only contain numbers and letters"),t}(o.username);return f({password:e,username:t}),I.isEmpty(e)&&I.isEmpty(t)})()&&t(function(e){return function(t){var n=ee+"/signup";m.a.post(n,e).then((function(){t(T(e)),t(_.actions.setServerSideErrorMessage(""))})).catch((function(){t(N("failed to signUp"))}))}}(o))},p=function(e,t){if(!t.includes(" ")){var n=Object(c.a)({},o);n[e]=t,d(n)}},x=function(e){return I.map(h[e],(function(t,n){return v(t,"error_element_"+e+"_"+n)}))},v=function(e,t){return Object(a.jsx)("div",{id:t,className:u.a.errorMessage,children:e},t)};return Object(a.jsxs)("div",{className:D()("container-fluid card mt-5",u.a.loginContainer),children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Username"}),Object(a.jsx)("input",{value:o.username,onChange:function(e){return p("username",e.target.value)},type:"text",className:"form-control",id:"userNameField"}),!I.isEmpty(h.username)&&x("username")]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(a.jsx)("input",{value:o.password,onChange:function(e){return p("password",e.target.value)},type:"password",className:"form-control",id:"exampleInputPassword1"}),!I.isEmpty(h.password)&&x("password")]}),v(e,"serverSideError")]}),Object(a.jsxs)("div",{className:u.a.signInUpContainer,children:[Object(a.jsx)(B.a,{icon:"log-in",onClick:function(){t(T(o))},className:"btn-sm btn-primary m-3",children:"Sign In"}),Object(a.jsx)(B.a,{icon:"upload",onClick:function(){return O()},className:"btn-sm btn-primary m-3",children:"Sign Up"})]})]})},U=n(189),A=n(20),R=Object(A.a)(),J=n(34),z=n.n(J),L=n(27),Y=n.n(L),P=function(e){var t=Object(l.b)(),n=Object(r.useState)({title:"",done:!1}),s=Object(i.a)(n,2),o=s[0],d=s[1],u=function(e,t){var n=Object(c.a)({},o);n[e]=t,d(n)},j=function(){var e,n=Y()().utcOffset(0).format(),a={title:o.title,done:o.done,date:n,modified:n};t((e=a,function(){var t=Object(p.a)(f.a.mark((function t(n,a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=te+"/createTask",m.a.post(r,e,{headers:x()}).then((function(e){var t=e.data,r=Object(c.a)(Object(O.a)({},t.id,t),a().todo.taskMap);n(g(r))})).catch((function(e){console.error("Error: "+e),alert("Failed to create task")}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()))};return e.isOpen?Object(a.jsxs)("div",{className:D()("container-fluid card mb-3 mt-3",z.a.container),children:[Object(a.jsxs)("div",{className:z.a.textAreaContainer,children:[Object(a.jsxs)("div",{className:"form",children:[Object(a.jsx)("h4",{className:"form-label",children:"Create Task"}),Object(a.jsx)("textarea",{value:o.title,placeholder:"Write your task here",onChange:function(e){return u("title",e.target.value)},className:"form-control",id:"title"})]}),Object(a.jsxs)("div",{className:z.a.doneCheckBox,children:[Object(a.jsx)("input",{checked:o.done,onChange:function(){return u("done",!o.done)},type:"checkbox",className:"m-1",id:"exampleCheck1"}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"exampleCheck1",children:"Done"})]})]}),Object(a.jsx)("div",{children:Object(a.jsx)(B.a,{onClick:function(){return j()},intent:"success",className:"btn-sm btn-success m-3",children:"Submit"})})]}):Object(a.jsx)("div",{})},H=n(35),W=n.n(H),q=function(e){var t=e.taskItem,n=Object(l.b)(),s=Object(r.useState)(t),o=Object(i.a)(s,2),d=o[0],u=o[1],j=function(e,a){var r,s=Object(c.a)({},t);s[e]=a,s.modified=Y()().utcOffset(0).format(),n((r=s,function(e,t){var n=te+"/updateTask";m.a.post(n,r,{headers:x()}).then((function(n){var a=n.data,r=Object(c.a)(Object(c.a)({},t().todo.taskMap),{},Object(O.a)({},a.id,n.data));e(g(r))})).catch((function(e){console.error("Error: "+e),alert("Failed to update task")}))}))},b=function(e){return Y()(e).tz(Y.a.tz.guess()).format("HH:mm DD/MM/yyyy")},h=I.isEqual(d.title,t.title);return Object(a.jsxs)(B.b,{style:t.done?{backgroundColor:"#E1E8ED"}:{},children:[Object(a.jsxs)("div",{className:W.a.todoTaskRow,children:[Object(a.jsx)("div",{className:W.a.todoTaskCheckbox,children:Object(a.jsx)(B.g,{interactionKind:"hover",content:"Is task complete",children:Object(a.jsx)(B.c,{label:"Done",inline:!0,onChange:function(){return j("done",!t.done)}})})}),Object(a.jsx)("form",{className:W.a.todoTaskControls,onSubmit:function(e){j("title",d.title),e.preventDefault()},children:Object(a.jsxs)(B.d,{fill:!0,vertical:!1,children:[Object(a.jsx)("input",{placeholder:"Enter task title...",className:"bp3-input",type:"text",value:d.title,onChange:function(e){return function(e){var t=Object(c.a)(Object(c.a)({},d),{},{title:e});u(t)}(e.target.value)}}),!h&&Object(a.jsx)(B.a,{title:"Save",small:!0,intent:"success",disabled:h,icon:"upload",type:"submit"}),Object(a.jsx)(B.a,{title:"Delete",small:!0,intent:"danger",icon:"delete",onClick:function(){return n((e=t.id||"",function(t,n){var a=te+"/deleteTask?taskId="+e;m.a.delete(a,{headers:x()}).then((function(){var a=Object(c.a)({},n().todo.taskMap);delete a[e],t(g(a))})).catch((function(e){console.error("Error: "+e),alert("Failed to delete task")}))}));var e}})]})})]}),Object(a.jsxs)("div",{className:"d-flex ml-5 mt-2",children:[Object(a.jsxs)("div",{className:"text-muted mr-3",children:[" Created : ",b(t.date)," "]}),Object(a.jsxs)("div",{className:"text-muted",children:[" Last Modified : ",b(t.modified)," "]})]})]})},G=n(36),Z=n.n(G),$=n(7),K={date:"Creation Date",modified:"Modification Date"},Q=function(e){var t=Object(l.b)(),n=Object(l.c)(k),s=Object(l.c)(y),o=Object(r.useState)({field:"date",order:"desc"}),d=Object(i.a)(o,2),u=d[0],j=d[1],b=Object(r.useState)(!1),h=Object(i.a)(b,2),f=h[0],p=h[1];Object(r.useEffect)((function(){I.isEmpty(s)||t((function(e){var t=te+"/allTasks";m.a.get(t,{headers:x()}).then((function(t){var n=t.data;e(g(n))})).catch((function(e){console.error("Error: "+e),alert("Failed to fetch data")}))}))}),[s]),Object(r.useEffect)((function(){p(!1)}),[n]);var C,w,N=function(){t((function(e){localStorage.removeItem("user"),e(_.actions.setUser({})),e(v.actions.setTaskMap({}))}))},T=function(){t((function(e){var t=te+"/deleteAllTasks";m.a.delete(t,{headers:x()}).then((function(){e(g({}))})).catch((function(e){console.error("Error: "+e),alert("Failed to delete task")}))}))},S=function(){var e=function(e,t){var n=Object(c.a)(Object(c.a)({},u),{},Object(O.a)({},e,t));j(n)};return Object(a.jsxs)("div",{className:Z.a.sortDropDownContainer,children:[Object(a.jsx)(B.g,{content:Object(a.jsxs)(B.e,{children:[Object(a.jsx)(B.f,{onClick:function(){return e("field","modified")},text:K.modified}),Object(a.jsx)(B.f,{onClick:function(){return e("field","date")},text:K.date})]}),position:$.a.RIGHT_TOP,children:Object(a.jsx)(B.a,{className:Z.a.sortByFieldButton,icon:"share",text:"Sorting by "+K[u.field]})}),Object(a.jsxs)(B.i,{className:"m-2 ml-3",inline:!0,onChange:function(t){return e("order",t.target.value)},selectedValue:u.order,children:[Object(a.jsx)(B.h,{label:"Desc",value:"desc"}),Object(a.jsx)(B.h,{className:Z.a.marginRight7,label:"Asc",value:"asc"})]})]})};return Object(a.jsxs)("div",{className:"bg-light",children:[Object(a.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(a.jsxs)("div",{className:"container-fluid",children:[Object(a.jsx)(B.a,{icon:"log-out",intent:"none",onClick:function(){return N()},className:"btn-sm  m-3",children:"Sign Out"}),Object(a.jsx)(B.a,{intent:"success",onClick:function(){return p(!f)},className:"  m-3",children:"Create New Task"}),Object(a.jsx)(B.a,{intent:"danger",onClick:function(){return T()},className:" m-3",children:"Delete All Tasks"}),S()]})}),Object(a.jsx)(P,{isOpen:f}),Object(a.jsx)("h1",{children:"Tasks"}),I.map((C=u.field,w=u.order,I.orderBy(n,[C],[w])),(function(e){return Object(a.jsx)(q,{classname:"mt-4",taskItem:e},e.id)}))]})},V="http://"+window.location.host,X="http://localhost:8080",ee=X+"/api/v1/auth",te=X+"/api/v1/todoTasks",ne=function(e){var t=Object(l.c)(y);return Object(r.useEffect)((function(){if(t.accessToken){var e=new URL(V+"/todolist");R.push(e.pathname)}else{var n=new URL(V+"/login");R.push(n.pathname)}}),[t]),Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("div",{className:"container-fluid w-50",children:Object(a.jsxs)(U.c,{children:[Object(a.jsx)(U.a,{user:t,exact:!0,path:["/","/todolist"],component:Q}),Object(a.jsx)(U.a,{exact:!0,path:"/login",component:F})]})})})},ae={login:_.reducer,todo:v.reducer},re={login:{serverSideErrorMessage:"",user:JSON.parse(localStorage.getItem("user")||"{}")}},se=Object(j.a)({reducer:ae,preloadedState:re});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(183),n(184),n(185);o.a.render(Object(a.jsx)(U.b,{history:R,children:Object(a.jsx)(l.a,{store:se,children:Object(a.jsx)(ne,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},32:function(e,t,n){e.exports={signInUpContainer:"login_signInUpContainer__36uJf",errorMessage:"login_errorMessage__1gjBG",loginContainer:"login_loginContainer__Rhahw"}},34:function(e,t,n){e.exports={container:"createNewTask_container__1slFb",textAreaContainer:"createNewTask_textAreaContainer__2g0JJ",doneCheckBox:"createNewTask_doneCheckBox__25o7q"}},35:function(e,t,n){e.exports={todoTaskCheckbox:"todoItem_todoTaskCheckbox__2YFF1",todoTaskRow:"todoItem_todoTaskRow__1zA6w",todoTaskControls:"todoItem_todoTaskControls__1i69x",backgroundTaskItem:"todoItem_backgroundTaskItem__2vZ_S",doneCheckBox:"todoItem_doneCheckBox__2xzQ1"}},36:function(e,t,n){e.exports={sortDropDownContainer:"todoList_sortDropDownContainer__2ydh0",sortByFieldButton:"todoList_sortByFieldButton__137gC",marginRight7:"todoList_marginRight7__3m1TA"}}},[[186,1,2]]]);
//# sourceMappingURL=main.799754d9.chunk.js.map